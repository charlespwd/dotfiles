#!/bin/bash

if [[ $(lpass status) = 'Not logged in.' ]]; then
  notify-send 'LastPass' 'Please login first.'
  exit 0
fi

menu="rofi -dmenu -i -matching fuzzy -levenshtein-sort -p lpass:"
passinfo=$(lpass ls --format '%an - %au - %ai' | $menu)
passid=$(echo "$passinfo" | awk -F' - ' '{ print $3 }')
lpass show -p $passid | xclip -i -selection clipboard

$HOME/bin/clear-clipboard &
disown
