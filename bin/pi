#!/bin/bash

pi="${2-raspi}.local"

case "$1" in
  mount)
    dest="$HOME/ws/pi"
    echo "Mounting $pi on $dest"
    mkdir -p $dest
    sshfs $pi: $dest
    ;;

  unmount)
    echo "Unmounting $pi from ~/ws/pi"
    sudo umount ~/ws/pi
    ;;

  connect)
    echo "Connecting to $pi"
    ssh pi@$pi
    ;;

  desktop)
    echo "Opening desktop view of $pi"
    ssh "pi@${pi}" '~/bin/vnc start'
    vncviewer "${pi}:0"
    ;;

  shutdown)
    echo "Shutting down $pi"
    ssh $pi 'sudo shutdown -h now'
    ;;

  reboot)
    echo "Rebooting down $pi"
    ssh pi@$pi 'sudo shutdown -h now'
    sleep 10
    ssh pi@$pi
    ;;

  *)
   echo "Usage: pi {connect|desktop|shutdown|reboot|mount|unmount} [hostname]"
   exit 1
   ;;
esac

exit 0
